---
title: Schedule a Report
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Quickstart Guide: Schedule a Report

IQM's API allows you to create report scheduling events.

Scheduling reports is easy; just use the following endpoints:

<span class="badge badge--success">POST</span> <span class="path-text">/api/v3/ua/login</span>
<br /><span class="badge badge--success">POST</span> <span class="path-text">/api/v3/ra/report/email/schedule</span>

## About IQM Reports

The IQM APIs provide access to all dimensions and KPIs of your ad-serving reporting data in JSON format. You can use the APIs to connect to applications of your choice.

Reports can be either **daily** or **aggregated**. The daily report will include the date as a dimension and provide the data breakdown by date. Reports provide five top-level dimensions of filtering support, and you can filter on multiple values for each dimension.

You can run a report containing up to three months of data for any dimension combination or up to one year for the campaign dimension. You must run multiple reports if you need more than that amount of data.

## Schedule a Report

This quick start guide will help you create a report scheduling event. At a minimum, you must log in, have a campaign started, in order to execute reports. Once these steps have been completed, you can create a scheduling event.

1. Log In
    * Optional if you have already logged in and have a token
1. Schedule a Report
    * Execute scheduling event with frequency, day, and end date parameters

### Step 1: Log In

<span class="badge badge--success">POST</span> <span class="path-text">/api/v3/ua/login</span>

<div class="container">
  <div class="child1">

To log in, the `Authorization: Basic` header is required. The Login API returns an OAuth-compliant response with an Organization Workspace ID (`owId`), which is a unique identifier for each organization. This ID will be used for any further API communications.

| Headers |  |
| ----  | --- |
| `Authorization` <br /><span class="type-text">string</span> <span class="required-text">required</span> | Authorization bearer token. See [Authentication Guide](/docs/Quickstart%20Guides/Authentication-Quickstart-Guide) |
| `X-IAA-HOST` <br /><span class="type-text">string</span> <span class="required-text">required</span> | Workspace URL |

| Request Schema |  |
| ----  | --- |
| `grantType` <br /><span class="type-text">string</span> <span class="required-text">required</span> | [OAuth Grant Types](https://oauth.net/2/grant-types/) |
| `email` <br /><span class="type-text">string</span> <span class="required-text">required</span> | Your user account email |
| `password` <br /><span class="type-text">string</span> <span class="required-text">required</span> | Your user accout password |

</div><div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "grantType": "password",
  "email": "pratik.t+ihp@iqm.com",
  "password": "123456"
}
```

```json title="Response 200"
{
  "success": true,
  "data":
  {
    "access_token": "106adb25-37b0-4cab-8381-d682fe7cc3c8",
    "refresh_token": "eac4c1f6-781e-4b04-baff-9c2e415d1f64",
    "scope": "read write",
    "token_type": "bearer",
    "expires_in": 35999,
    "owId": 200001
  }
}
```

<details>
<summary>More Response Samples</summary>

```json title="Response 400"
{
  "success": false,
  "data":
  {
    "status": "On Hold",
    "reason": "The particular account is kept on hold due to missed payment dates for last 3 months.",
    "supportEmail": "support@iqm.com"
  },
  "errorObjects":
  [
    {
      "error": "User is not allowed to access provided customer",
      "reason": "User is not associated with any active organization."
    }
  ]
}
```

```json title="Response 403"
{
  "success": false,
  "errorObjects":
  [
    {
      "error": "User doesn't exist or user is not allowed to provided workspace."
    }
  ]
}
```

</details>

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: {
          access_token: string;
          refresh_token: string;
          scope: string;
          token_type: string;
          expires_in: number;
          owId: number;
        };
      };
    };
  };
  400: {
    content: {
      "application/json": {
        success: boolean;
        data: {
          status: string;
          reason: string;
          supportEmail: string;
        };
        errorObjects: {
          error: string;
          reason: string;
        }[];
      };
    };
  };
  403: {
    content: {
      "application/json": {
        success: boolean;
        errorObjects: {
          error: string;
        }[];
      };
    };
  };
};

function Login(): Promise < Responses > {
  const options = {
    method: 'POST',
    url: 'https://app.iqm.com/api/v3/ua/login',
    requestBody: {
      content: {
        "application/json": {
          email: `string`,
          password: `string`,
        }
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

### Step 2: Schedule a Report

<span class="badge badge--success">POST</span> <span class="path-text">/api/v3/ra/report/email/schedule`</span>

<div class="container">
  <div class="child1">

Decide the delivery frequency, day, and end date of scheduled reports. This API will save the delivery information and return a success message.

For further information see the complete [Save Report Scheduling Event API Documentation](https://api.iqm.com/docs?path=tag/Report-API/operation/saveReportScheduleEvent).

| Request Schema |  |
|---|---|
| `reportId` <br /><span class="type-text">integer</span> | The unique report ID, event will be created on this report ID. |
| `subscriberEmails` <br /><span class="type-text">array of strings</span> | List of emails to which the report will be sent. |
| `fileType` <br /><span class="type-text">integer</span> | Report file type ID. The report will be sent in the selected file format. E.g. [1 = CSV, 2 = XLS] |
| `deliveryFrequency` <br /><span class="type-text">integer</span> | Delivery frequency type ID for the emails to be sent. E.g. [1 = Once, 2 = Daily, 3 = Weekly, 4 = Monthly] |
| `deliveryDay` <br /><span class="type-text">string</span> | If delivery is not 'Once', specify the day/date when the report should be sent. E.g. [Day: "Sunday", "Monday", ...] or [Monthly: "First", "Last", "1", "2", ..., "29"] |
| `eventEndDate` <br /><span class="type-text">integer</span> | If delivery is not "Once", this should be a long, TIME EPOCH in UNIX format, in milliseconds. This is event's end date, Scheduled report will be stopped after the `eventEndDate` is exceeded. |
| `runningTotalEnabled` <br /><span class="type-text">boolean</span> <span class="required-text">optional</span> | Flag to indicate if the 'Total' Running is enabled for the report. This flag is supported only with 'Campaign' dimension. If this is true the start-date for the report duration should be the EARLIEST campaign start date, so the report-time-period will be from the Earliest-campaign-start-date to the report-end-date. |
| `earliestCampaignDate` <br /><span class="type-text">integer</span> | With `runningTotalEnabled` as `true`, this should be a long TIME EPOCH in UNIX format, in milliseconds. This is campaign's EARLIEST start date from the selected campaigns, which will be set as the start date of the report-time-period. |

</div><div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "reportId": 1235,
  "subscriberEmails": [
    "sample_email1@example.com",
    "sample_email2@example.com"
  ],
  "fileType": 2,
  "deliveryFrequency": 3,
  "eventEndDate": 1670674106000,
  "deliveryDay": "MONDAY",
  "runningTotalEnabled": true,
  "earliestCampaignStartDate": 1670674108900
}
```

```json title="Response 200"
{
  "success": true,
  "data": {
    "scheduledData": {
      "earliestCampaignStartDate": 0,
      "reportId": 12345,
      "deliveryFrequency": 3,
      "fileType": 1,
      "subscriberEmails": [
        "sample_email@sample.com",
        "sample_email2@sample.com"
      ],
      "eventEndDate": 1696270980000,
      "deliveryDay": "MONDAY",
      "runningTotalEnabled": false
    },
    "message": "Report schedule has been successfully updated."
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    headers: {
      [name: string]: unknown;
    };
    content: {
      "application/json": {
        success: boolean;
        data: {
          scheduledData: {
            earliestCampaignStartDate: number;
            reportId: number;
            deliveryFrequency: number;
            fileType: number;
            subscriberEmails: string[];
            eventEndDate: number;
            deliveryDay: string;
            runningTotalEnabled: boolean;
          }
          message: string;
        }
      }
    };
  };
};

function saveReportScheduleEvent(): Promise < Responses > {
  const options = {
    method: 'POST',
    url: 'https://app.iqm.com/api/v3/ra/report/email/schedule',
    requestBody: {
      content: {
        "application/json": {
          earliestCampaignStartDate?: `number`,
          reportId?: `number`,
          deliveryFrequency?: `number`,
          fileType?: `number`,
          subscriberEmails?: `array of strings`,
          eventEndDate?: `number`,
          deliveryDay?: `string`,
          runningTotalEnabled?: `boolean`
        }
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>


