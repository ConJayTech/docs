---
hide_table_of_contents: true
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Bid Model API

The Bid Model API allows users to optimize their advertising campaigns for better performance. The user can fine-tune metrics such as where their ads appear (Include/Exclude), campaign priority management, and dimensions by which a campaign is subdivided.

This page will cover the common endpoints and methods associated with the Bid Model API.

## Authorization

---

<div class="container">
<div class="child3">

| Headers  |  |
| ----  | --- |
| `Authorization` <br /><span class="type-text">string</span> <span class="required-text">required</span> | Authorization bearer token <br />See [Authentication Guide](/docs/Quickstart%20Guides/Authentication-Quickstart-Guide) |
| `X-IAA-OW-ID` <br /><span class="type-text">integer</span> <span class="required-text">required</span> | Organization Worskpace ID Header |

</div></div>

## Get Bid Modelling Details

### Get Campaign Dimension Counts

<span class="badge badge--primary">GET</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}/dimensions/count</span>

<div class="container">
  <div class="child1">

Retrieves counts of dimensions for a specific campaign within a given date range.

| Path Parameters     |  |
| ---- | --- |
| <span class="code-text">campaignId</span> <br /><span class="type-text">integer</span> <span class="required-text">required</span> | The campaign ID for which the report is being generated |

| Query Parameters  |     |
| --- | --- |
| <span class="code-text">startDate</span> <br /><span class="type-text">integer</span> | Unix epoch timestamp (in milliseconds) for campaign start date |
| <span class="code-text">endDate</span>   <br /><span class="type-text">integer</span> | Unix epoch timestamp (in milliseconds) for campaign end date   |


</div><div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Response 200"
{
  "success": true,
  "data": {
    "creative": 2,
    "dealId": 0,
    "openExchange": 0,
    "publisherCategory": 0,
    "trafficType": 2,
    "deviceType": 4,
    "state": 0,
    "city": 0,
    "zip": 0,
    "exchange": 18
  }
}
```

<details>
<summary>More Responses</summary>


```json title="Response 400"
{
  "success": false,
  "errorObjects": [
    {
      "error": "Missing required parameter: 'startDate'. Type: long",
      "field": "startDate"
    }
  ]
}
```

```json title="Response 403"
{
  "success": false,
  "errorObjects": [
    {
      "error": "Forbidden!"
    }
  ]
}
```

```json title="Response 422"
{
  "success": false,
  "errorObjects": [
    {
      "error": "No campaign found with given campaign Id"
    }
  ]
}
```

```json title="Respone 500"
{
  "success": false,
  "errorObjects": [
    {
      "error": "server encountered an error !"
    }
  ]
}
```

</details>

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: {
          creative: number;
          dealId: number;
          openExchange: number;
          publisherCategory: number;
          trafficType: number;
          deviceType: number;
          state: number;
          city: number;
          zip: number;
          exchange: number;
        }
      }
    };
  };
  400: {
    content: {
      "application:json": {
        success: boolean
        errorObjects: {
          error: string;
          field: string;
        }[]
      }
    }
  }
  403: {
    content: {
      "application/json": {
        success: boolean
        errorObjects: {
          error: string
        }[]
      }
    };
  };
  422: {
    content: {
      "application/json": {
        success: boolean
        errorObjects: {
          error: string
        }[]
      }
    };
  };
  500: {
    content: {
      "application/json": {
        success: boolean
        errorObjects: {
          error: string
        }[]
      }
    };
  };
};

function getDimensionWiseServeCount(): Promise<Responses> {
  const options = {
    method: 'GET',
    url: 'https://app.iqm.com/api/v3/bm/campaigns/{campaignId}/dimensions/count',
    params: {
      query: {
        startDate: `number`,
        endDate: `number`,
      },
      path: {
        campaignId: `number`
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

### Get Dimension Specific Spending for a Campaign

<span class="badge badge--primary">GET</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}\/dimension/\{dimensionId\}/spent</span>

<div class="container">
  <div class="child1">

Get details on total spent by dimension for a campaign.

| Path Parameters     |  |
| ---- | --- |
| `campaignId` <br /><span class="type-text">integer</span> <span class="required-text">required</span> | The campaign ID |
| `dimensionId` <br /><span class="type-text">integer</span> <span class="required-text">required</span> | Dimension ID <br />See static [list of dimension IDs](#get-list-of-bid-model-dimensions) |

</div><div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Response 200"
{
  "success": true,
  "data": {
    "entityWiseSpent": {
      "1": 5.1,
      "2": 5.76,
      "3": 5.34
    }
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: {
          entityWiseSpent: {
            dimensionId: number
          }
        }
      }
    }
  }
};

function getDimensionWiseEntitySpentForCampaign(): Promise<Responses> {
  const options = {
    method: 'GET',
    url: 'https://app.iqm.com/api/v3/bm/campaigns/{campaignId}/dimension/{dimensionId}/spent',
    params: {
      path: {
        campaignId: `number`,
        dimensionId: `number`
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

### Get Total and Dimension Specific Count of Modelled Items for a Campaign

<span class="badge badge--primary">GET</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}\/bid-models/count</span>

<div class="container">
  <div class="child1">

Get details on total and dimension specific counts of modelled items for a specified campaign.

| Path Parameters     |  |
| ---- | --- |
| `campaignId` <br /><span class="type-text">integer</span> <span class="required-text">required</span> | The campaign ID |

</div><div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Response 200"
{
  "success": true,
  "data": {
    "totalCount": 7,
    "dimensionWiseCount": [
      {
        "dimensionId": 1,
        "count": 5
      },
      {
        "dimensionId": 7,
        "count": 1
      },
      {
        "dimensionId": 13,
        "count": 1
      }
    ]
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: {
          totalCount: number;
          dimensionWiseCount: {
            dimensionId: number;
            count: number
          }[]
        }
      }
    }
  }
};

function getModelledItemsCount(): Promise<Responses> {
  const options = {
    method: 'GET',
    url: 'https://app.iqm.com/api/v3/bm/campaigns/{campaignId}/bid-models/count',
    params: {
      query: {
        dimensionId: `number`
      },
      path: {
        campaignId: `number`,
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

## Include/Exclude Management

<br /><span class="badge badge--success">POST</span> <span class="path-text">/api/v2/cmp/deviceType/includeExclude</span>
<br /><span class="badge badge--success">POST</span> <span class="path-text">/api/v2/cmp/exchange/includeExclude</span>
<br /><span class="badge badge--success">POST</span> <span class="path-text">/api/v2/cmp/trafficsource/includeExclude</span>

<div class="container">
  <div class="child1">

The **Include** and **Exclude** options allow the user to control where their ads appear. 

For IDs see endpoint documentation for [device type](https://api.iqm.com/docs?path=tag/Master-API/operation/getMasterSegmentDeviceType), [exchanges](https://api.iqm.com/docs?path=tag/Master-API/operation/getExchanges), and [traffic source](https://api.iqm.com/docs?path=tag/Master-API/operation/getTrafficTypes) in the [Master API](/docs/Guidelines/Master-API-Guidelines).

|Attributes | |
| --- | --- |
| <span class="code-text">ids</span> <br /><span class="type-text">string</span> | ID of entity |
| <span class="code-text">isExcluded</span> <br /><span class="type-text">integer</span> | Allow targeted entity: <span class="code-text">0</span> <br />Block targeted entity: <span class="code-text">1</span> |
| <span class="code-text">campaignId</span> <br /><span class="type-text">integer</span> | Campaign ID   |

</div>
  <div class="child2">

  <Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "ids": "15",
  "isExcluded": 0,
  "campaignId": 214269
}
```

```json title="Response 200 (device type)"
{
  "statusCode": 200,
  "responseObject": {
    "message": "The Device Types have been allowed."
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json;charset=UTF-8": {
        statusCode: number;
        responseObject: {
          message: string;
        };
      };
    };
  };
};

function DeviceType-includeExclude(): Promise<Responses> {
  const options = {
    method: 'POST',
    url: 'https://app.iqm.com/api/v2/cmp/deviceType/includeExclude',
    params: {
      header: {
        "X-IAA-HOST": `string`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          ids: `string`,
          isExcluded: `number`,
          campaignId: `number`,
        }
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

### Include/Exclude Entities From a Campaign

<span class="badge badge--success">POST</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}\/include-Exclude/dimensions/\{dimensionId\}</span>

<div class="container">
  <div class="child1">

Optimize a campaign by updating the status of specified entities to be either included or excluded with path parameters `campaignId` and `dimensionId`.

| Path  ||
| --- | --- |
| <span class="code-text">campaignId</span> <br /><span class="type-text">integer</span>  | Campaign ID  |
| <span class="code-text">dimensionId</span> <br /><span class="type-text">integer</span> | Dimension ID <br />See static [list of dimension IDs](#get-list-of-bid-model-dimensions) |

| Attributes    |  |
| ---- | --- |
| <span class="code-text">advertiserId</span><br /><span class="type-text">integer</span> <span class="required-text">optional</span> | Advertiser ID  |
| <span class="code-text">dspId</span> <br /><span class="type-text">integer</span> <span class="required-text">optional</span>      | Demand Side Platform ID  |
| <span class="code-text">owId</span> <br /><span class="type-text">integer</span> <span class="required-text">optional</span>       | Organization workspace ID   |
| <span class="code-text">uowId</span> <br /><span class="type-text">integer</span> <span class="required-text">optional</span>      | User organization workspace ID |
| <span class="code-text">campaignId</span> <br /><span class="type-text">integer</span> <span class="required-text">optional</span> | Unique ID of campaign  |
| <span class="code-text">ids</span> <br /><span class="type-text">string</span> <span class="required-text">optional</span>         | Creative ID  |
| <span class="code-text">isExcluded</span> <br /><span class="type-text">integer</span>  | Target entity:<span class="code-text">0</span> <br />Block entity:<span class="code-text">1</span> |

</div>
  <div class="child2">

  <Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample (creatives)"
{
  "ids": "604675,604084",
  "isExcluded": 0
}
```

```json title="Response 200 (creatives)"
{
  "success": true,
  "data": "Creatives successfully targeted for the campaign."
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
};

function toggleCampaignDimensionStatus(): Promise<Responses> {
  const options = {
    method: 'POST',
    url: 'https://app.iqm.com/api/v3/bm/campaigns/{campaignId}/include-exclude/dimensions/{dimensionId}',
    params: {
      path: {
        campaignId: `number`,
        dimensionId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          advertiserId: `number`,
          dspId: `number`,
          owId: `number`,
          uowId: `number`,
          campaignId: `number`,
          ids: `string`,
          isExcluded: `number`
        }
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

## Campaign Priority Management

### Assign Priority to Multiple Campaigns

<span class="badge badge--warning">PUT</span> <span class="path-text">/api/v3/bm/io/\{ioId\}/bid-models</span>

<div class="container">
  <div class="child1">

Assigning priority to campaigns allows the user to establish a sequential order of bidding to fine-tune their targeting strategy. Assign priority (ranging 1 to 10) to multiple `campaignIds`.

| Path  |     |
| ---- | --- |
| <span class="code-text">ioId</span> <br /><span class="type-text">integer</span> | Insertion Order ID |

| Attributes    |   |
| ---- | --- |
| `bidModelRequests` <br /><span class="type-text">array of objects</span> | Objects containing bid model actions |
| <div class="border"><span class="type-text">Object properties</span></div> | |
| <div class="border">`action` <br /><span class="type-text">enum</span></div> | Specifies bid model action: `ADD`, `UPDATE`, `DELETE` |
| <div class="border">`bidModelData` <br /><span class="type-text">object</span></div> | Object containing bid model data: `id`, `priority`, `bidMultiplier`, `spendRatio`, `spendRatioTypeId` |
| <div class="border">`dimensionEntityMappings` <br /><span class="type-text">array of objects</span></div> | Object containing entity mappings: `campaignId`, `dimensionId`, `entityId`, `bidModelDataId` |
| <div class="border">`bidModelDataIds` <br /><span class="type-text">array of integers</span></div> |
| `baseBid` <br /><span class="type-text">integer</span> |
| `excludeDimensionEntityMappings` <br /><span class="type-text">object</span> | Object cointaining dimension entity mappings to exclude: `advertiserId`, `dspId`, `owId`, `uowId`, `campaignId`, `ids`, `isExcluded`, `dimensionId` |

<details>

<summary><code>bidModelData</code> object</summary>

| attributes | |
| --- | --- |
| `id` <br /><span class="type-text">integer</span> |
| `priority` <br /><span class="type-text">integer</span> | Assigned priority: [`1` .. `10`] |
| `bidMultiplier` <br /><span class="type-text">integer</span> | Bid Multiplier [`0.1` .. `100`] |
| `spendRatio` <br /><span class="type-text">integer</span> | Spend ratio [`0` .. `100`] |
| `spendRatioTypeId` <br /><span class="type-text">integer</span> | Spend ratio type ID [`1`, `2`] |

</details>

<details>

<summary><code>dimensionEntityMappings</code> object</summary>

| attributes | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> | Campaign ID |
| `dimensionId`  <br /><span class="type-text">integer</span> | Dimension ID |
| `entityId` <br /><span class="type-text">integer</span> | Entity ID |
| `bidModelDataId` <br /><span class="type-text">integer</span> | Bid model data ID |

</details>

<details>

<summary><code>excludeDimensionEntityMappings</code> object</summary>

| attributes | |
| --- | --- |
| `advertiserId` <br /><span class="type-text">integer</span> | Advertiser ID |
| `dspId` <br /><span class="type-text">integer</span> | DSP ID |
| `owId` <br /><span class="type-text">integer</span> | Organization Workspace ID |
| `uowId` <br /><span class="type-text">integer</span> | Universal Organization Workspace ID |
| `campaignId` <br /><span class="type-text">integer</span> | Campaign ID |
| `ids` <br /><span class="type-text">string</span> | Comma separated IDs |
| `isExcluded` <br /><span class="type-text">boolean</span> |
| `dimensionId` <br /><span class="type-text">integer</span> | Dimension ID |

</details>

</div>
  <div class="child2">

  <Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "bidModelRequests": [
    {
      "action": "ADD",
      "bidModelData": {
        "priority": 1
      },
      "dimensionEntityMappings": [
        {
          "campaignId": 1
        }
      ]
    },
    {
      "action": "UPDATE",
      "bidModelData": {
        "id": 3677,
        "priority": 2
      }
    },
    {
      "action": "DELETE",
      "bidModelDataIds": [
        893
      ]
    }
  ]
}
```

```json title="Response 200"
{
  "success": true,
  "data": "Priority Updated Successfully"
}
```

<details>
<summary>More Responses</summary>

```json title="Respone 403"
{
  "success": false,
  "errorObjects": [
    {
      "error": "Forbidden!"
    }
  ]
}
```

```json title="Response 422"
{
  "success": false,
  "errorObjects": [
    {
      "error": "Cannot assign priority as campaign is in invalid status"
    }
  ]
}
```

```json title="Response 500"
{
  "success": false,
  "errorObjects": [
    {
      "error": "server encountered an error !"
    }
  ]
}
```

</details>

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
  403: {
    content: {
      "application/json": {
        succes: boolean;
        errorObjects: {
          error: string
        }[]
      }
    };
  };
  422: {
    content: {
      "application/json": {
        succes: boolean;
        errorObjects: {
          error: string
        }[]
      }
    };
  };
  500: {
    content: {
      "application/json": {
        succes: boolean;
        errorObjects: {
          error: string
        }[]
      }
    };
  };
};

function managePriorityToCampaign(): Promise<Responses> {
  const options = {
    method: 'PUT',
    url: 'https://app.iqm.com/api/v3/bm/io/{ioId}/bid-models',
    params: {
      path: {
        ioId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          bidModelRequests?: [
            {
              bidModelData?: {
                id?: `number`,
                priority?: `number`,
                bidMultiplier?: `number`,
                spendRatio?: `number`,
                spendRatioTypeId?: `number`,
              },
              dimensionEntityMappings?: [
                {
                  campaignId?: `number`,
                  dimensionId?: `number`,
                  entityId?: `number`,
                  bidModelDataId?: `number`,
                }
              ],
              action: [ "ADD" | "UPDATE" | "DELETE" ],
              bidModelDataIds?: `[number]`,
            }
          ],
          baseBid?: `number`,
          excludeDimensionEntityMappings?: [
            {
              advertiserId?: `number`,
              dspId?: `number`,
              owId?: `number`,
              uowId?: `number`,
              campaignId?: `number`,
              ids?: `string`,
              isExcluded?: `number`,
              dimensionId?: `number`,
            }
          ]  
        } 
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

### More Priority Management for Multiple Campaigns

<span class="badge badge--success">POST</span> <span class="path-text">/api/v3/bm/io/\{ioId\}/bid-models</span>
<br /><span class="badge badge--danger">DELETE</span> <span class="path-text">/api/v3/bm/io/\{ioId\}/bid-models</span>
<br /><span class="badge badge--info">PATCH</span> <span class="path-text">/api/v3/bm/io/\{ioId\}/bid-models</span>

<div class="container">
  <div class="child1">

Add, update, or delete assigned priorities to multiple campaigns.

| Query Parameters   | <span class="badge badge--danger">DELETE</span> only|
| --- | --- |
| `campaignIds` <br /><span class="type-text">string</span> | Comma separated campaign IDs

| Path Parameters  | |
| --- | --- |
| <span class="code-text">ioId</span> <br /><span class="type-text">integer</span> | Insertion Order ID |

| Attributes  |  |
| --- | --- |
| <span class="code-text">priority</span> <br /><span class="type-text">integer</span> <span class="required-text">required</span> | Assigned priority: [`1` .. `10`] |
| <span class="code-text">campaignIdList</span> <br /><span class="type-text">array of integers</span> <span class="required-text">required</span> | Campaign IDs   |

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "priority": 1,
  "campaignIdList": [
    123456, 
    234567, 
    345678, 
    456789
  ]
}
```

```json title="response 200"
{
  "success": true,
  "data": "Priority Updated Successfully"
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
};

function addPriorityToCampaign(): Promise<Responses> {
  const options = {
    method: 'POST'
    url: 'https://app.iqm.com/api/v3/bm/io/{ioId}/bid-models',
    params: {
      path: {
        ioId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          priority: `number`,
          campaignIds: `array of numbers`,
        }
      }
    }
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}

function deletePriorityToCampaign(): Promise<Responses> {
  const options = {
    method: 'DELETE'
    url: 'https://app.iqm.com/api/v3/bm/io/{ioId}/bid-models',
    params: {
      path: {
        ioId: `number`
      }
    },
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}

  function updatePriorityToCampaign(): Promise<Responses> {
  const options = {
    method: 'PATCH'
  url: 'https://app.iqm.com/api/v3/bm/io/{ioId}/bid-models',
    params: {
      path: {
        ioId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          priority: `number`,
          campaignIds: `array of numbers`,
        }
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

## Bid Modelling Management

### Add Bid Modelling

<span class="badge badge--success">POST</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}/bid-models</span>

<div class="container">
<div class="child1">

Add bid modelling for different dimensions. Validates and calculates others as bid modelling as well.

| Path Parameters | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> | Campaign ID |

| Request Schema ||
| --- | --- |
| `bidModelling` <br /><span class="type-text">object</span> | Object containing `bidModelData` and `dimensionEntityMappings` |
| <div class="border"><span class="type-text">Object properties</span></div> | |
| <div class="border">`bidModelData` <br /><span class="type-text">object</span></div> | Object containing bid model data: `id`, `priority`, `spendRatio`, `spendRatioTypeId`, and `bidMultiplier` |
| <div class="border">`dimensionEntityMappings` <br /><span class="type-text">array of objects</span></div> | Object containing entity mappings: `campaignId`, `dimensionId`, `entityId`, `bidModelDataId` |

<details>

<summary><code>bidModelData</code> object</summary>

| attributes | |
| --- | --- |
| `id` <br /><span class="type-text">integer</span> |
| `priority` <br /><span class="type-text">integer</span> | Assigned priority: [`1` .. `10`] |
| `bidMultiplier` <br /><span class="type-text">integer</span> | Bid Multiplier [`0.1` .. `100`] |
| `spendRatio` <br /><span class="type-text">integer</span> | Spend ratio [`0` .. `100`] |
| `spendRatioTypeId` <br /><span class="type-text">integer</span> | Spend ratio type ID [`1`, `2`] |

</details>

<details>

<summary><code>dimensionEntityMappings</code> object</summary>

| attributes | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> | Campaign ID |
| `dimensionId`  <br /><span class="type-text">integer</span> | Dimension ID |
| `entityId` <br /><span class="type-text">integer</span> | Entity ID |
| `bidModelDataId` <br /><span class="type-text">integer</span> | Bid model data ID |

</details>

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "bidModelling": [
    {
      "bidModelData": {
        "id": 1,
        "priority": 1,
        "spendRatio": 100,
        "spendRatioTypeId": 1,
        "bidMultiplier": 1
      },
      "dimensionEntityMappings": [
        {
          "dimensionId": 1,
          "entityId": 583002
        }
      ]
    }
  ]
}
```

```json title="Response 200"
{
  "success": true,
  "data": "Priority Updated Successfully"
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
};

function addBidModellingOfDimensionForCampaign(): Promise<Responses> {
  const options = {
    method: 'POST',
    url: 'https://app.iqm.com/api/v3/bm/campaigns/{campaignId}/bid-models',
    params: {
      path: {
        campaignId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          bidModelling: [
            {
              bidModelData?: {
                id?: `number`,
                priority?: `number`,
                bidMultiplier?: `number`,
                spendRatio?: `number`,
                spendRatioTypeId?: `number`
              },
              dimensionEntityMappings?: [
                {
                  campaignId?: `number`,
                  dimensionId?: `number`,
                  entityId?: `number`,
                  bidModelDataId?: `number`
                }
              ]
            }
          ]  
        }
      }
    }
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div>
</div>

---

### Update Bid Modelling Actions

<span class="badge badge--warning">PUT</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}/bid-models</span>

<div class="container">
<div class="child1">

Update various actions such as `ADD`, `UPDATE`, or `DELETE` for bid modelling. 

| Path Parameters | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> | Campaign ID |

| Request Schema | |
| --- | --- |
| `bidModelRequests` <br /><span class="type-text">array of objects</span> | Object to update bid modelling, each request contains: `action`, `bidModelData`, `dimensionEntityMappings`, and `bidModelDataIds`  |
| <div class="border"><span class="type-text">Object properties</span></div> | |
| <div class="border">`action` <br /><span class="type-text">string</span></div> | Desired action for request: `ADD`, `UPDATE`, or `DELETE` |
| <div class="border">`bidModelData` <br /><span class="type-text">object</span></div> | Object containing bid model data, see [previous section](#add-bid-modelling) for attributes |
| <div class="border">`dimensionEntityMappings` <br /><span class="type-text">array of objects</span></div> | Object containing dimension entity mapping data, see [previous section](#add-bid-modelling) for attributes |
| <div class="border">`bidModelDataIds` <br /><span class="type-text">array of integers</span></div> | Bid model data IDs targeted for `DELETE` action |
| `baseBid` <br /><span class="type-text">integer</span> |
| `excludeDimensionEntityMappings`  <br /><span class="type-text">object</span> | Object cointaining dimension entity mappings to exclude, see [previous section](#assign-priority-to-multiple-campaigns) for attributes |

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "bidModelRequests": [
    {
      "action": "ADD",
      "bidModelData": {
        "priority": 1,
        "bidMultiplier": 1,
        "spendRatio": 1,
        "spendRatioTypeId": 1
      },
      "dimensionEntityMappings": [
        {
          "dimensionId": 1,
          "entityId": 640245
        }
      ]
    },
    {
      "action": "ADD",
      "bidModelData": {
        "priority": 1,
        "bidMultiplier": 1,
        "spendRatio": 1,
        "spendRatioTypeId": 1
      },
      "dimensionEntityMappings": [
        {
          "dimensionId": 1,
          "entityId": -1
        }
      ]
    },
    {
      "action": "UPDATE",
      "bidModelData": {
        "id": 883,
        "priority": 1,
        "bidMultiplier": 1,
        "spendRatio": 1,
        "spendRatioTypeId": 1
      }
    },
    {
      "action": "UPDATE",
      "bidModelData": {
        "id": 894,
        "priority": 1,
        "bidMultiplier": 1,
        "spendRatio": 1,
        "spendRatioTypeId": 1
      }
    },
    {
      "action": "DELETE",
      "bidModelDataIds": [
        893
      ]
    }
  ],
  "baseBid": 3.1,
  "excludeDimensionEntityMappings": [
    {
      "dimensionId": 1,
      "ids": "1,2,3",
      "isExcluded": 0
    },
    {
      "dimensionId": 2,
      "ids": "1,2,3",
      "isExcluded": 1
    }
  ]
}
```

```json title="Response 200"
{
  "success": true,
  "data": "Bid Modelling updated successfully!"
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
};

function manageBidModelling(): Promise<Responses> {
  const options = {
    method: 'PUT',
    url: 'https://app.iqm.com/api/v3/bm/campaigns/{campaignId}/bid-models',
    params: {
      path: {
        campaignId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          bidModelRequests?: [
            {
              bidModelData?: {
                id?: `number`,
                priority?: `number`,
                bidMultiplier?: `number`,
                spendRatio?: `number`,
                spendRatioTypeId?: `number`,
              },
              dimensionEntityMappings?: [
                {
                  campaignId?: `number`,
                  dimensionId?: `number`,
                  entityId?: `number`,
                  bidModelDataId?: `number`,
                }
              ],
              action: [ "ADD" | "UPDATE" | "DELETE" ],
              bidModelDataIds?: `array of numbers`,
            }
          ],
          baseBid?: `number`,
          excludeDimensionEntityMappings?: [
            {
              advertiserId?: `number`,
              dspId?: `number`,
              owId?: `number`,
              uowId?: `number`,
              campaignId?: `number`,
              ids?: `string`,
              isExcluded?: `number`,
              dimensionId?: `number`,
            }
          ]
        }
      }
    }
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div>
</div>

---

### Update Bid Modelling Dimensions

<span class="badge badge--info">PATCH</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}/bid-models</span>

<div class="container">
<div class="child1">

Update bid modelling for different dimensions.

| Path Parameters | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> | Campaign ID |

| Request Schema ||
| --- | --- |
| `bidModelData` <br /><span class="type-text">object</span> | Object containing bid model data: `id`, `priority`, `spendRatio`, `spendRatioTypeId`, and `bidMultiplier` |

<details>

<summary><code>bidModelData</code> object</summary>

| attributes | |
| --- | --- |
| `id` <br /><span class="type-text">integer</span> |
| `priority` <br /><span class="type-text">integer</span> | Assigned priority: [`1` .. `10`] |
| `bidMultiplier` <br /><span class="type-text">integer</span> | Bid Multiplier [`0.1` .. `100`] |
| `spendRatio` <br /><span class="type-text">integer</span> | Spend ratio [`0` .. `100`] |
| `spendRatioTypeId` <br /><span class="type-text">integer</span> | Spend ratio type ID [`1`, `2`] |

</details>


</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "bidModelData": [
    {
      "id": 1,
      "priority": 1,
      "spendRatio": 50,
      "spendRatioTypeId": 1,
      "bidMultiplier": 1
    },
    {
      "id": 1,
      "priority": 10,
      "spendRatio": 50,
      "spendRatioTypeId": 1,
      "bidMultiplier": 1
    }
  ]
}
```

```json title="Response 200"
{
  "success": true,
  "data": "Bid Modelling updated successfully!"
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
};

function updateBidModellingForCampaign(): Promise<Responses> {
  const options = {
    method: 'PATCH',
    url: 'https://app.iqm.com/api/v3/bm/campaigns/{campaignId}/bid-models',
    params: {
      path: {
        campaignId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          bidModelData?: [
            {
              id?: `number`,
              priority?: `number`,
              bidMultiplier?: `number`,
              spendRatio?: `number`,
              spendRatioTypeId?: `number`
            }
          ]
        }
      }
    }
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div>
</div>

---

### Delete Bid Modelling Data

<span class="badge badge--danger">DELETE</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}/bid-models</span>

<div class="container">
<div class="child1">

Delete all bid modelling for a campaign or dimension, or based on bid modelling data IDs.

| Path Parameters | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> | Campaign ID |

| Query Parameters | |
| --- | --- |
| `dimensionIds` <br /><span class="type-text">string</span> | Comma separated dimension IDs to delete bid modelling data for |
| `bidModelDataIds` <br /><span class="type-text">string</span> | Comma separated bid model data IDs to delete |
| `campaignId` <br /><span class="type-text">string</span> | Campaign ID to delete bid modelling data for |

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Response 200"
{
  "success": true,
  "data": "Bid Modelling deleted successfully!"
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
};

function deleteBidModelling(): Promise<Responses> {
  const options = {
    method: 'DELETE',
    url: 'https://app.iqm.com/api/v3/bm/campaigns/{campaignId}/bid-models',
    params: {
      query?: {
        dimensionIds?: `string`,
        bidModelDataIds?: `string`,
        campaignId?: `number`,
      },
      path: {
        campaignId: `number`
      }
    },
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div>
</div>

---

## Get Metrics Report For a Given Campaign and Dimension

<span class="badge badge--success">POST</span> <span class="path-text">api/v3/bm/campaigns/\{campaignId\}\/reports/\{dimensionId\}</span>

<div class="container">
  <div class="child1">

Generate a detailed metrics for a specific campaign, segmented by dimension.

| Path Parameters | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> <span class="required-text">required</span> | Campaign ID
| `dimensionId` <br /><span class="type-text">integer</span> <span class="required-text">required</span> | Dimension ID

<details>
<summary>See Query Parameters</summary>

| Query Parameters | |
| --- | --- |
| `searchField` <br /><span class="type-text">string</span> | Search results by keyword
| `sortBy` <br /><span class="type-text">string</span> | Sorts by ascending (`+`) or descending (`-`) <br />Default: `-impressions` |
| `pageNo` <br /><span class="type-text">integer</span> |  Page number for the data <br />Default: `1` |
| `pageSize` <br /><span class="type-text">integer</span> | Maximum number of results returned <br />Default: `50` |
| `timeZoneId` <br /><span class="type-text">integer</span> | Timezone ID |
| `startDate` <br /><span class="type-text">integer</span> | Unix epoch timestamp of campaign start date, in milliseconds |
| `endDate`  <br /><span class="type-text">integer</span> | Unix epoch timestamp of campaign end date, in milliseconds |

</details>

| Request Schema | |
| --- | --- |
| `fileName` <br /><span class="type-text">string</span> | File name |
| `columns` <br /><span class="type-text">object</span> | Object containing `label` and `value` |
| `label` <br /><span class="type-text">string</span> | Serves as the header row in the downloaded CSV/XLSX file, each label corresponds to a data field, displayed as the column header in the file
| `value` <br /><span class="type-text">string</span> | Represents the data key used to retrieve values from the result map sourced from the database, ensures each column in the CSV/XLSX file accurately reflects the relevant data, with applied formatting and timezone adjustments as needed |
| `fileType` <br /><span class="type-text">string</span> | File type: `csv` or `xlsx` |
| `token` <br /><span class="type-text">string</span> | Access token | 
| `download` <br /><span class="type-text">boolean</span> | Generate download URL: `true` |

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "fileName": "Stage Shared Advertiser_deal_id_1708536470049",
  "columns": [
    {
      "label": "Deal ID",
      "value": "name"
    },
    {
      "label": "eCPM($)",
      "value": "eCPM"
    }
  ],
  "fileType": "csv",
  "token": "fd5b502b-3c49-4703-83d9-df1b397011a2",
  "download": true
}
```

```json title="Response 200"
{
  "success": true,
  "data": {
    "url": "DownloadURL"
  }
}
```

<details>
<summary>More Responses</summary>

```json title="Response 403"
{
  "success": false,
  "errorObjects": [
    {
      "error": "Forbidden!"
    }
  ]
}
```

```json title="Response 422"
{
  "success": false,
  "errorObjects": [
    {
      "error": "The campaign ID is missing or invalid. Please provide a valid campaign ID."
    }
  ]
}
```

```json title="Response 500"
{
  "success": false,
  "errorObjects": [
    {
      "error": "server encountered an error !"
    }
  ]
}
```

</details>

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success?: boolean;
        data?: {
          url: string
        }
      };
    };
  };
  401: {
    content: {
      "application/json": {
        success: boolean;
        errorObjects: {
          error: string
        }[]
      }
    }
  };
  422: {
    content: {
      "application/json": {
        success: boolean;
        errorObjects: {
          error: string
        }[]
      }
    }
  };
  500: {
    content: {
      "application/json": {
        success: boolean;
        errorObjects: {
          error: string
        }[]
      }
    }
  };
}

function fetchCampaignMetricsByDimension(): Promise<Responses> {
  const options = {
    method: 'POST',
    url: 'https://app.iqm.com/api/v3/bm/campaigns/{campaignId}/reports/{dimensionId}',
    params: {
      query?: {
        searchField?: `string`,
        sortBy?: `string`,
        pageNo?: `number`,
        pageSize?: `number`,
        timeZoneId?: `number`,
        startDate?: `number`,
        endDate?: `number`,
      },
      path: {
        campaignId: `number`,
        dimensionId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          fileName: `string`,
          columns: [
            {
              label: `string`,
              value: `string`
            }
          ],
          fileType: `string`,
          token: `string`,
          download: `boolean`
        }
      }
    }
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

## Get List of Bid Model Dimensions


<span class="badge badge--primary">GET</span> <span class="path-text">/api/v3/bm/static/dimensions</span>

<div class="container">
  <div class="child1">

This API will provide values of bid-model dimensions and sub-dimensions.

| Attributes | |
| ------- | --- |
| `1`  | Creative |
| `2` | Inventory |
| `3` | Deal ID |
| `4` | Open Exchange |
| `5` | Publisher Category |
| `6` | Device |
| `7` | Traffic Type |
| `8` | Device Type |
| `9` | Location |
| `10` | State |
| `11` | City |
| `12` | Zip |
| `13` | Exchange |

</div>
 <div class="child2">

 <Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Response 200"
{
  "success": true,
  "data": {
    "totalRecords": 5,
    "filteredRecords": 5,
    "dimensions": [
      {
        "name": "creative",
        "id": 1,
        "label": "Creative",
        "order": 1,
        "modellingEnabled": true
      },
      {
        "name": "inventory",
        "id": 2,
        "label": "Inventory",
        "order": 2,
        "modellingEnabled": false,
        "subdimensions": [
          {
            "name": "deal_id",
            "id": 3,
            "label": "Deal ID",
            "order": 1,
            "modellingEnabled": false
          },
          {
            "name": "open_exchange",
            "id": 4,
            "label": "Open Exchange",
            "order": 2,
            "modellingEnabled": false
          },
          {
            "name": "publisher_category",
            "id": 5,
            "label": "Publisher Category",
            "order": 3,
            "modellingEnabled": false
          }
        ]
      },
      {
        "name": "device",
        "id": 6,
        "label": "Device",
        "order": 3,
        "modellingEnabled": false,
        "subdimensions": [
          {
            "name": "traffic_type",
            "id": 7,
            "label": "Traffic Type",
            "order": 1,
            "modellingEnabled": false
          },
          {
            "name": "device_type",
            "id": 8,
            "label": "Device Type",
            "order": 2,
            "modellingEnabled": false
          }
        ]
      },
      {
        "name": "location",
        "id": 9,
        "label": "Location",
        "order": 4,
        "modellingEnabled": false,
        "subdimensions": [
          {
            "name": "state",
            "id": 10,
            "label": "State",
            "order": 1,
            "modellingEnabled": false
          },
          {
            "name": "city",
            "id": 11,
            "label": "City",
            "order": 2,
            "modellingEnabled": false
          },
          {
            "name": "zip",
            "id": 12,
            "label": "Zip",
            "order": 3,
            "modellingEnabled": false
          }
        ]
      },
      {
        "name": "exchange",
        "id": 13,
        "label": "Exchange",
        "order": 5,
        "modellingEnabled": false
      }
    ]
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [`prerequisites`](/docs/Getting%20Started/Typescript-Prerequisites.mdx) for TypeScript usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: {
          totalRecords: number;
          filteredRecords: number;
          dimensions: {
            name: string;
            id: number;
            label: string;
            order: number;
            modellingEnabled: boolean
            subdimensions?: {
              name: string;
              id: number;
              label: string;
              order: number;
              modellingEnabled: boolean
            }[]
          }[]
        }
      }
    };
  };
}

function getDimensions(): Promise<Responses> {
  const options = {
    method: 'GET',
    url: 'https://app.iqm.com/api/v3/bm/static/dimensions',
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

